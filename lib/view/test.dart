// // test_call_screen.dart - ุตูุญุฉ ุงุฎุชุจุงุฑ ุงูููุงููุงุช
// import 'package:flutter/material.dart';
// import 'package:flutter/services.dart';
// import 'package:get/get.dart';
// import 'package:khabir/services/simple_call_service.dart';

// class TestCallScreen extends StatelessWidget {


//   void _testNativeCallNotification() {
//   print('๐งช Testing native call notification');
  
//   try {
//     NativeNotificationService.showNativeCallNotification(
//       callerName: 'ุฃุญูุฏ ูุญูุฏ (Native)',
//       callerPhone: '+966501234567',
//       callData: {
//         'order_id': 'NATIVE_TEST_123',
//         'service_type': 'ุณุจุงูุฉ',
//         'provider_id': 'PRV_NATIVE',
//         'test_mode': true,
//       },
//     );
    
//     Get.snackbar(
//       'ุชู ุฅุฑุณุงู ุงูุงุฎุชุจุงุฑ',
//       'ุชุญูู ูู ุดุฑูุท ุงูุฅุดุนุงุฑุงุช',
//       backgroundColor: Colors.green,
//       colorText: Colors.white,
//       duration: Duration(seconds: 3),
//     );
    
//   } catch (e) {
//     Get.snackbar(
//       'ุฎุทุฃ ูู ุงูุงุฎุชุจุงุฑ',
//       'ุชุฃูุฏ ูู ุฅุนุฏุงุฏ Native Service: $e',
//       backgroundColor: Colors.red,
//       colorText: Colors.white,
//     );
//   }
// }

// // ุงุฎุชุจุงุฑ ุฅุดุนุงุฑ ุนุงุฏู
// void _testNativeGeneralNotification() {
//   print('๐งช Testing native general notification');
  
//   try {
//     NativeNotificationService.showNativeGeneralNotification(
//       title: 'ุฅุดุนุงุฑ ุงุฎุชุจุงุฑ',
//       body: 'ูุฐุง ุฅุดุนุงุฑ ุงุฎุชุจุงุฑ ูู ุงููุธุงู ุงูุฃุตูู',
//       data: {
//         'test': true,
//         'type': 'general_test',
//         'timestamp': DateTime.now().millisecondsSinceEpoch,
//       },
//     );
    
//     Get.snackbar(
//       'ุชู ุฅุฑุณุงู ุงูุฅุดุนุงุฑ',
//       'ุชุญูู ูู ุดุฑูุท ุงูุฅุดุนุงุฑุงุช',
//       backgroundColor: Colors.blue,
//       colorText: Colors.white,
//       duration: Duration(seconds: 3),
//     );
    
//   } catch (e) {
//     Get.snackbar(
//       'ุฎุทุฃ ูู ุงูุงุฎุชุจุงุฑ',
//       'ุชุฃูุฏ ูู ุฅุนุฏุงุฏ Native Service: $e',
//       backgroundColor: Colors.red,
//       colorText: Colors.white,
//     );
//   }
// }


//   @override
//   Widget build(BuildContext context) {
//     return Scaffold(
//       appBar: AppBar(
//         title: Text('ุงุฎุชุจุงุฑ ุงูููุงููุงุช'),
//         backgroundColor: Colors.blue,
//         foregroundColor: Colors.white,
//       ),
//       body: Padding(
//         padding: EdgeInsets.all(20),
//         child: Column(
//           crossAxisAlignment: CrossAxisAlignment.stretch,
//           children: [
//             SizedBox(height: 20),
            
//             Text(
//               'ุงุฎุชุจุงุฑ ูุธุงู ุงูููุงููุงุช',
//               style: TextStyle(
//                 fontSize: 24,
//                 fontWeight: FontWeight.bold,
//               ),
//             ),
            
//             SizedBox(height: 30),
            
//             // ุฒุฑ ุงุฎุชุจุงุฑ ููุงููุฉ ุนุงุฏูุฉ
//             ElevatedButton.icon(
//               onPressed: () => _testNormalCall(),
//               icon: Icon(Icons.call, color: Colors.white),
//               label: Text(
//                 'ุงุฎุชุจุงุฑ ููุงููุฉ ุนุงุฏูุฉ',
//                 style: TextStyle(
//                   fontSize: 18,
//                   color: Colors.white,
//                 ),
//               ),
//               style: ElevatedButton.styleFrom(
//                 backgroundColor: Colors.green,
//                 padding: EdgeInsets.symmetric(vertical: 15),
//                 shape: RoundedRectangleBorder(
//                   borderRadius: BorderRadius.circular(10),
//                 ),
//               ),
//             ),
            
//             SizedBox(height: 15),
            
//             // ุฒุฑ ุงุฎุชุจุงุฑ ููุงููุฉ ูุน ุจูุงูุงุช ุฅุถุงููุฉ
//             ElevatedButton.icon(
//               onPressed: () => _testCallWithData(),
//               icon: Icon(Icons.engineering, color: Colors.white),
//               label: Text(
//                 'ุงุฎุชุจุงุฑ ููุงููุฉ ููุฏู ุฎุฏูุฉ',
//                 style: TextStyle(
//                   fontSize: 18,
//                   color: Colors.white,
//                 ),
//               ),
//               style: ElevatedButton.styleFrom(
//                 backgroundColor: Colors.blue,
//                 padding: EdgeInsets.symmetric(vertical: 15),
//                 shape: RoundedRectangleBorder(
//                   borderRadius: BorderRadius.circular(10),
//                 ),
//               ),
//             ),
            
//             SizedBox(height: 15),
            
//             // ุฒุฑ ุงุฎุชุจุงุฑ ููุงููุฉ ุทูุงุฑุฆ
//             ElevatedButton.icon(
//               onPressed: () => _testEmergencyCall(),
//               icon: Icon(Icons.warning, color: Colors.white),
//               label: Text(
//                 'ุงุฎุชุจุงุฑ ููุงููุฉ ุทูุงุฑุฆ',
//                 style: TextStyle(
//                   fontSize: 18,
//                   color: Colors.white,
//                 ),
//               ),
//               style: ElevatedButton.styleFrom(
//                 backgroundColor: Colors.red,
//                 padding: EdgeInsets.symmetric(vertical: 15),
//                 shape: RoundedRectangleBorder(
//                   borderRadius: BorderRadius.circular(10),
//                 ),
//               ),
//             ),
            
//             SizedBox(height: 30),
            

//             // ุฒุฑ ุงุฎุชุจุงุฑ Native Call Notification
// ElevatedButton.icon(
//   onPressed: () => _testNativeCallNotification(),
//   icon: Icon(Icons.notifications_active, color: Colors.white),
//   label: Text(
//     'ุงุฎุชุจุงุฑ ุฅุดุนุงุฑ ููุงููุฉ Native',
//     style: TextStyle(
//       fontSize: 18,
//       color: Colors.white,
//     ),
//   ),
//   style: ElevatedButton.styleFrom(
//     backgroundColor: Colors.purple,
//     padding: EdgeInsets.symmetric(vertical: 15),
//     shape: RoundedRectangleBorder(
//       borderRadius: BorderRadius.circular(10),
//     ),
//   ),
// ),

// SizedBox(height: 15),

// // ุฒุฑ ุงุฎุชุจุงุฑ Native General Notification
// ElevatedButton.icon(
//   onPressed: () => _testNativeGeneralNotification(),
//   icon: Icon(Icons.notification_important, color: Colors.white),
//   label: Text(
//     'ุงุฎุชุจุงุฑ ุฅุดุนุงุฑ ุนุงุฏู Native',
//     style: TextStyle(
//       fontSize: 18,
//       color: Colors.white,
//     ),
//   ),
//   style: ElevatedButton.styleFrom(
//     backgroundColor: Colors.teal,
//     padding: EdgeInsets.symmetric(vertical: 15),
//     shape: RoundedRectangleBorder(
//       borderRadius: BorderRadius.circular(10),
//     ),
//   ),
// ),

// SizedBox(height: 15),

//             // ูุนูููุงุช ุฅุถุงููุฉ
//             Container(
//               padding: EdgeInsets.all(15),
//               decoration: BoxDecoration(
//                 color: Colors.grey[100],
//                 borderRadius: BorderRadius.circular(10),
//                 border: Border.all(color: Colors.grey[300]!),
//               ),
//               child: Column(
//                 crossAxisAlignment: CrossAxisAlignment.start,
//                 children: [
//                   Text(
//                     'ููุงุญุธุงุช:',
//                     style: TextStyle(
//                       fontSize: 16,
//                       fontWeight: FontWeight.bold,
//                     ),
//                   ),
//                   SizedBox(height: 8),
//                   Text('โข ุณูุธูุฑ ุฅุดุนุงุฑ ุงูููุงููุฉ ูุน ูุบูุฉ ุงูุฑููู'),
//                   Text('โข ููููู ูุจูู ุฃู ุฑูุถ ุงูููุงููุฉ'),
//                   Text('โข ุฒุฑ ุงูุชูุงุตูู ุณููุชุญ ุตูุญุฉ ุงูุทูุจ'),
//                   Text('โข ุงููุบูุฉ ุณุชุชููู ุนูุฏ ุงุชุฎุงุฐ ุฃู ุฅุฌุฑุงุก'),
//                 ],
//               ),
//             ),
            
//             Spacer(),
            
//             // ูุนูููุงุช ุงูุฎุฏูุฉ
//             Container(
//               padding: EdgeInsets.all(10),
//               child: Text(
//                 'ูุฐู ุงูุฃุฒุฑุงุฑ ูุงุฎุชุจุงุฑ ูุธุงู ุงูููุงููุงุช ููุท\nูู ุงูุชุทุจูู ุงูุญูููู ุณุชุธูุฑ ุนูุฏ ุงุณุชูุงู ุฅุดุนุงุฑ FCM',
//                 style: TextStyle(
//                   fontSize: 12,
//                   color: Colors.grey[600],
//                 ),
//                 textAlign: TextAlign.center,
//               ),
//             ),
//           ],
//         ),
//       ),
//     );
//   }

//   // ุงุฎุชุจุงุฑ ููุงููุฉ ุนุงุฏูุฉ
//   void _testNormalCall() {
//     try {
//       final callService = SimpleCallService.instance;
      
//       callService.showCallOverlay(
//         callerName: 'ุฃุญูุฏ ูุญูุฏ',
//         callerPhone: '+966501234567',
//         callerAvatar: null, // ุจุฏูู ุตูุฑุฉ
//         extraData: null,
//       );
      
//       Get.snackbar(
//         'ุชู ุจุฏุก ุงูุงุฎุชุจุงุฑ',
//         'ุณุชุธูุฑ ูุงุฌูุฉ ุงูููุงููุฉ ุงูุขู',
//         backgroundColor: Colors.green,
//         colorText: Colors.white,
//         duration: Duration(seconds: 2),
//       );
      
//     } catch (e) {
//       Get.snackbar(
//         'ุฎุทุฃ',
//         'ุญุฏุซ ุฎุทุฃ ูู ุจุฏุก ุงูุงุฎุชุจุงุฑ: $e',
//         backgroundColor: Colors.red,
//         colorText: Colors.white,
//       );
//     }
//   }

//   // ุงุฎุชุจุงุฑ ููุงููุฉ ูุน ุจูุงูุงุช
//   void _testCallWithData() {
//     try {
//       final callService = SimpleCallService.instance;
      
//       callService.showCallOverlay(
//         callerName: 'ุฎุงูุฏ ุงูุณุจุงู',
//         callerPhone: '+966551234567',
//         callerAvatar: 'https://via.placeholder.com/150', // ุตูุฑุฉ ุชุฌุฑูุจูุฉ
//         extraData: {
//           'order_id': 'ORD_12345',
//           'service_type': 'ุณุจุงูุฉ',
//           'provider_id': 'PRV_567',
//           'estimated_arrival': '15 ุฏูููุฉ',
//         },
//       );
      
//     } catch (e) {
//       Get.snackbar(
//         'ุฎุทุฃ',
//         'ุญุฏุซ ุฎุทุฃ ูู ุจุฏุก ุงูุงุฎุชุจุงุฑ: $e',
//         backgroundColor: Colors.red,
//         colorText: Colors.white,
//       );
//     }
//   }

//   // ุงุฎุชุจุงุฑ ููุงููุฉ ุทูุงุฑุฆ
//   void _testEmergencyCall() {
//     try {
//       final callService = SimpleCallService.instance;
      
//       callService.showCallOverlay(
//         callerName: 'ุฎุฏูุฉ ุงูุทูุงุฑุฆ',
//         callerPhone: '+966911',
//         callerAvatar: null,
//         extraData: {
//           'order_id': 'EMR_911',
//           'service_type': 'ุทูุงุฑุฆ',
//           'priority': 'ุนุงููุฉ',
//         },
//       );
      
//     } catch (e) {
//       Get.snackbar(
//         'ุฎุทุฃ',
//         'ุญุฏุซ ุฎุทุฃ ูู ุจุฏุก ุงูุงุฎุชุจุงุฑ: $e',
//         backgroundColor: Colors.red,
//         colorText: Colors.white,
//       );
//     }
//   }
// }

// // ุฅุถุงูุฉ ุงูุตูุญุฉ ุฅูู home_screen.dart ุฃู ุฃู ุตูุญุฉ ุฃุฎุฑู
// class HomeScreenWithTestButton extends StatelessWidget {
//   @override
//   Widget build(BuildContext context) {
//     return Scaffold(
//       appBar: AppBar(
//         title: Text('ุงูุฑุฆูุณูุฉ'),
//         actions: [
//           // ุฒุฑ ุงุฎุชุจุงุฑ ุงูููุงููุงุช ูู AppBar
//           IconButton(
//             onPressed: () => Get.to(() => TestCallScreen()),
//             icon: Icon(Icons.call),
//             tooltip: 'ุงุฎุชุจุงุฑ ุงูููุงููุงุช',
//           ),
//         ],
//       ),
//       body: SingleChildScrollView(
//         padding: EdgeInsets.all(20),
//         child: Column(
//           children: [
//             // ูุญุชูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ...
            
//             SizedBox(height: 20),
            
//             // ุฒุฑ ุงุฎุชุจุงุฑ ุณุฑูุน
//             Card(
//               elevation: 5,
//               child: Padding(
//                 padding: EdgeInsets.all(15),
//                 child: Column(
//                   children: [
//                     Icon(
//                       Icons.phone_in_talk,
//                       size: 50,
//                       color: Colors.blue,
//                     ),
//                     SizedBox(height: 10),
//                     Text(
//                       'ุงุฎุชุจุงุฑ ูุธุงู ุงูููุงููุงุช',
//                       style: TextStyle(
//                         fontSize: 18,
//                         fontWeight: FontWeight.bold,
//                       ),
//                     ),
//                     SizedBox(height: 10),
//                     ElevatedButton(
//                       onPressed: () => _quickCallTest(),
//                       child: Text('ุงุฎุชุจุงุฑ ุณุฑูุน'),
//                       style: ElevatedButton.styleFrom(
//                         backgroundColor: Colors.blue,
//                         foregroundColor: Colors.white,
//                       ),
//                     ),
//                     SizedBox(height: 5),
//                     TextButton(
//                       onPressed: () => Get.to(() => TestCallScreen()),
//                       child: Text('ุงููุฒูุฏ ูู ุฎูุงุฑุงุช ุงูุงุฎุชุจุงุฑ'),
//                     ),
//                   ],
//                 ),
//               ),
//             ),
            
//             // ุจุงูู ูุญุชูู ุงูุตูุญุฉ...
//           ],
//         ),
//       ),
      
//       // ุฒุฑ ุนุงุฆู ูุงุฎุชุจุงุฑ ุณุฑูุน
//       floatingActionButton: FloatingActionButton(
//         onPressed: () => _quickCallTest(),
//         child: Icon(Icons.call),
//         backgroundColor: Colors.green,
//         tooltip: 'ุงุฎุชุจุงุฑ ููุงููุฉ ุณุฑูุน',
//       ),
//     );
//   }

//   // ุงุฎุชุจุงุฑ ุณุฑูุน
//   void _quickCallTest() {
//     try {
//       final callService = SimpleCallService.instance;
      
//       callService.showCallOverlay(
//         callerName: 'ุงุฎุชุจุงุฑ ุณุฑูุน',
//         callerPhone: '+966500000000',
//         extraData: {
//           'test': true,
//           'service_type': 'ุงุฎุชุจุงุฑ',
//         },
//       );
      
//     } catch (e) {
//       Get.snackbar(
//         'ุฎุทุฃ',
//         'ุชุฃูุฏ ูู ุชููุฆุฉ SimpleCallService ูู main.dart',
//         backgroundColor: Colors.red,
//         colorText: Colors.white,
//       );
//     }
//   }
// }

// // widget ุจุณูุท ูุฅุถุงูุฉ ุฒุฑ ูู ุฃู ููุงู
// class QuickCallTestButton extends StatelessWidget {
//   final String? buttonText;
//   final Color? buttonColor;

//   const QuickCallTestButton({
//     Key? key,
//     this.buttonText,
//     this.buttonColor,
//   }) : super(key: key);

//   @override
//   Widget build(BuildContext context) {
//     return ElevatedButton.icon(
//       onPressed: () {
//         try {
//           final callService = SimpleCallService.instance;
          
//           callService.showCallOverlay(
//             callerName: 'ูุฎุชุจุฑ ุงูุชุทุจูู',
//             callerPhone: '+966555123456',
//             extraData: {
//               'test_mode': true,
//               'service_type': 'ุงุฎุชุจุงุฑ ุงููุธุงู',
//             },
//           );
          
//         } catch (e) {
//           Get.snackbar(
//             'ุฎุทุฃ ูู ุงูุงุฎุชุจุงุฑ',
//             'ุชุฃูุฏ ูู ุฅุนุฏุงุฏ SimpleCallService ุจุดูู ุตุญูุญ',
//             backgroundColor: Colors.red,
//             colorText: Colors.white,
//           );
//         }
//       },
//       icon: Icon(Icons.phone, color: Colors.white),
//       label: Text(
//         buttonText ?? 'ุงุฎุชุจุงุฑ ุงูููุงููุฉ',
//         style: TextStyle(color: Colors.white),
//       ),
//       style: ElevatedButton.styleFrom(
//         backgroundColor: buttonColor ?? Colors.green,
//         padding: EdgeInsets.symmetric(horizontal: 20, vertical: 12),
//         shape: RoundedRectangleBorder(
//           borderRadius: BorderRadius.circular(8),
//         ),
//       ),
//     );
//   }
// }



// class NativeNotificationService {
//   static const platform = MethodChannel('com.khabirs.provider/notifications');

//   // ุฅุธูุงุฑ ุฅุดุนุงุฑ ููุงููุฉ native
//   @pragma('vm:entry-point')
//   static Future<void> showNativeCallNotification({
//     required String callerName,
//     required String callerPhone,
//     String? callerAvatar,
//     required Map<String, dynamic> callData,
//   }) async {
//     try {
//       await platform.invokeMethod('showCallNotification', {
//         'callerName': callerName,
//         'callerPhone': callerPhone,
//         'callerAvatar': callerAvatar ?? '',
//         'callData': callData,
//       });

//       print('โ Native call notification shown');
//     } catch (e) {
//       print('โ Error showing native call notification: $e');
//     }
//   }

//   // ุฅุธูุงุฑ ุฅุดุนุงุฑ ุนุงุฏู native
//   static Future<void> showNativeGeneralNotification({
//     required String title,
//     required String body,
//     Map<String, dynamic>? data,
//   }) async {
//     try {
//       await platform.invokeMethod('showGeneralNotification', {
//         'title': title,
//         'body': body,
//         'data': data ?? {},
//       });
//       print('โ Native general notification shown');
//     } catch (e) {
//       print('โ Error showing native general notification: $e');
//     }
//   }

//   // ุฅูุบุงุก ุฅุดุนุงุฑ ุงูููุงููุฉ
//   static Future<void> cancelCallNotification() async {
//     try {
//       await platform.invokeMethod('cancelCallNotification');
//       print('โ Native call notification cancelled');
//     } catch (e) {
//       print('โ Error cancelling native call notification: $e');
//     }
//   }
// }

